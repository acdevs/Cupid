<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Page</title>
    <link rel="icon" href="favicon/heart.png" type="image/x-icon">
    <link rel="stylesheet" href="css\my_account.css">
</head>
<body>
    <div class="wrapper">
      <div class="profile-card js-profile-card">
        <div class="profile-card__img">
          <img src="" alt="profile card" id="user-photo">
        </div>
    
        <div class="profile-card__cnt js-profile-cnt">
          <div class="profile-card__name" id="user-name">Name</div>
          <div class="profile-card__txt">Roll No
            <span id="user-rollNo"><strong>Roll No</strong></span>
          </div>
          <div class="profile-card__txt">Branch
            <span id="user-branch"><strong>Branch</strong></span>
          </div>
          <div class="profile-card__txt">Email
            <span id="user-email"><strong>Email</strong></span>
          </div>
          <div class="profile-card__txt">Gender
            <span id="user-gender"><strong>M/F</strong></span>
          </div>
          
          <div class="profile-card__txt">Instagram
            <span id="user-instagram"><strong>Instagram</strong></span>
          </div>

          <div class="profile-card-inf match-info">
           
            <div class="crush-profile-card__img">
              <img src="" alt="crush-profile card" id="crush-photo">
            </div>
            <div class="crush-details">
              <div class="profile-card__name" id="user-name">Name</div>
              <div class="profile-card__txt">Roll No
                <span id="user-rollNo"><strong>Roll No</strong></span>
              </div>
              <div class="profile-card__txt">Branch
                <span id="user-branch"><strong>Branch</strong></span>
              </div>
              <div class="profile-card__txt">Email
                <span id="user-email"><strong>Email</strong></span>
              </div>
              <div class="profile-card__txt">Gender
                <span id="user-gender"><strong>M/F</strong></span>
              </div>
              
              <div class="profile-card__txt">Instagram
                <span id="user-instagram"><strong>Instagram</strong></span>
              </div>
          
            </div>
          </div>
    
          <div class="profile-card-ctr">
            <!-- <button class="profile-card__button button--blue js-message-btn">Connect</button> -->
            <button class="profile-card__button button--orange" onclick="redirectToPage()">Home</button>
          </div>
        </div>
      </div>
    </div>
      
 <script>
  const hydrateMe = async () => {
    const user = await JSON.parse(localStorage.getItem('user'));
    document.getElementById('user-photo').src = user.photo;
    document.getElementById('user-name').innerText = user.name;
    document.getElementById('user-rollNo').innerText = user.rollNo;
    document.getElementById('user-branch').innerText = user.branch;
    document.getElementById('user-email').innerText = user.email;
    document.getElementById('user-gender').innerText = user.gender;
    document.getElementById('user-instagram').innerText = user.instagram;
  }

  const getCrush = async () => {
    fetch('http://127.0.0.1:8888/users/match',
    {
      method: 'GET',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': JSON.parse(localStorage.getItem('token'))
      }
    })
    .then(async (res) => {
      if (res.status === 200) {
        const match = await res.json();
        document.querySelector('.match-info').innerText = JSON.stringify(match);
      }
      else{
        document.querySelector('.match-info').innerText = 'Match Making not started Yet';
      }
    })
    .catch((err) => {
      document.querySelector('.match-info').innerText = err.message;
    });
  }

  hydrateMe();
  getCrush();
</script>
<script src="js\my_account.js"></script>
</body>
</html>