<form id="uploadForm" enctype="multipart/form-data">
    <input type="file" name="photo" id="photoInput">
    <button type="submit">Upload</button>
  </form>
  
  <script>

  function readyUpload(){
    // const obj = {
    //   "photo" : document.getElementById('photoInput').files[0],
    //   "name":"Aman Chandra",
    //   "rollNo" : 22124009,
    //   "email" : "amanc.it.23@nitj.ac.in",
    //   "gender" : "M",
    //   "password": "4444",
    //   "branch" : "IT",
    //   "crush" : "Isha",
    //   "socials":{
    //     "instagram":"aman.cha.ndra",
    //   }
    // }

    const obj = {
      "photo" : document.getElementById('photoInput').files[0],
      "name":"Isha Nanda",
      "rollNo" : 22124045,
      "email" : "ishan.it.22@nitj.ac.in",
      "gender" : "F",
      "password": "4444",
      "branch" : "IT",
      "crush" : "Shubham Nanda",
      "socials":{
        "instagram":"nanda.isha",
      }
    }
    
    const formData = new FormData();

    for (const key in obj) {
      if (obj.hasOwnProperty(key)) {
        if(key == 'photo')
          formData.append(key, obj[key]);
        else 
          formData.append(key, obj[key]);
      }
    }

    return formData;
  }
  document.getElementById('uploadForm').addEventListener('submit', async (event) => {
    event.preventDefault();

    const formData = await readyUpload();

    try {
      const response = await fetch('http://127.0.0.1:8888/users/signup', {
        method: 'POST',
        body: formData,
      });

      const data = await response.json();
      console.log(data);
    } catch (error) {
      console.error('Error:', error);
    }
  });
  </script>
  